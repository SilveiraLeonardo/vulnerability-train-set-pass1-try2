
#include <stdio.h>
#include <string.h>
#include <cstdlib>

#define S 100
#define N 1000

int main(int argc, char *argv[]) {
  char out[S];
  char buf[N];
  char msg[] = "Welcome to the argument echoing program\n";
  int len = 0;
  buf[0] = '\0';
  printf("%s", msg);
  while (argc) {
    int written_characters = snprintf(out, sizeof(out), "argument %d is %s\n", argc - 1, argv[argc - 1]);
    argc--;

    // Check whether the output is longer than the available buffer size
    if (written_characters < 0 || written_characters >= (sizeof(out))) {
      fprintf(stderr, "Error: snprintf buffer size is not enough\n");
      exit(EXIT_FAILURE);
    }

    if (len + written_characters >= N) {
        fprintf(stderr, "Error: arguments length exceeded\n");
        exit(EXIT_FAILURE);
    }

    strncat(buf, out, sizeof(buf) - len - 1);
    len = strlen(buf);
  }

  printf("%s",buf);
  return 0;
}
