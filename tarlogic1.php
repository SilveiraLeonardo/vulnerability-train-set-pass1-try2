
<?php
class Warm {
  private $dir;

  public function __construct($dir = '.') {
    $this->setDirectory($dir);
  }

  public function setDirectory($dir) {
    // Make sure the directory exists and is readable
    if (is_dir($dir) && is_readable($dir)) {
      $this->dir = $dir;
    } else {
      throw new Exception('Invalid directory or not readable');
    }
  }

  public function listDirectoryContents() {
    echo "This folder contains:\n";
    // Use scandir() instead of system() to list directory contents more safely
    $files = scandir($this->dir);
    foreach ($files as $file) {
      echo $file . PHP_EOL;
    }
  }
}

// Usage example, assuming the script is called "warm.php":
// php warm.php /path/to/directory

if (count($argv) >= 2) {
  $dir = $argv[1];

  try {
    $test = new Warm($dir);
    $test->listDirectoryContents();
  } catch (Exception $e) {
    echo 'Error: ' . $e->getMessage() . PHP_EOL;
  }
} else {
  echo "Please provide a directory path as the first argument.\n";
}
